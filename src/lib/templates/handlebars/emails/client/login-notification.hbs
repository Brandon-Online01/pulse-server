{{#base headerTitle="Security Alert: New Login to Your Client Portal" headerSubtitle="Client portal access notification"}}

<div class="greeting">
    Hello {{name}}! üîê
</div>

<div class="message">
    <p>We detected a new login to your client portal. If this was you, no action is needed. If you don't recognize this activity, please contact us immediately.</p>
</div>

<!-- Login Details -->
<div class="{{#if suspicious}}warning-notice{{else}}info-card{{/if}}">
    <h3 style="color: {{#if suspicious}}#d97706{{else}}#7c2d92{{/if}};">üîç Login Information</h3>
    <div class="detail-grid">
        <div class="detail-item">
            <span class="detail-label">Login Time</span>
            <span class="detail-value" style="font-weight: 700;">{{loginTime}}</span>
        </div>
        {{#if ipAddress}}
        <div class="detail-item">
            <span class="detail-label">IP Address</span>
            <span class="detail-value" style="font-family: monospace; background: #f3f4f6; padding: 2px 6px; border-radius: 4px;">{{ipAddress}}</span>
        </div>
        {{/if}}
        {{#if location}}
        <div class="detail-item">
            <span class="detail-label">Location</span>
            <span class="detail-value">{{location}}{{#if country}}, {{country}}{{/if}}</span>
        </div>
        {{/if}}
        {{#if deviceType}}
        <div class="detail-item">
            <span class="detail-label">Device Type</span>
            <span class="detail-value">{{deviceType}}</span>
        </div>
        {{/if}}
        {{#if operatingSystem}}
        <div class="detail-item">
            <span class="detail-label">Operating System</span>
            <span class="detail-value">{{operatingSystem}}</span>
        </div>
        {{/if}}
        {{#if browser}}
        <div class="detail-item">
            <span class="detail-label">Browser</span>
            <span class="detail-value">{{browser}}</span>
        </div>
        {{/if}}
    </div>
</div>

<!-- Suspicious Activity Warning -->
{{#if suspicious}}
<div style="background: rgba(153, 27, 27, 0.1); border: 2px solid #991b1b; border-radius: 12px; padding: 20px; margin: 20px 0;">
    <h4 style="color: #991b1b; margin-bottom: 16px;">üö® UNUSUAL ACTIVITY DETECTED</h4>
    <p style="color: #7f1d1d; font-size: 16px; font-weight: 600; margin-bottom: 16px;">This login appears unusual for your account.</p>
    <p style="color: #7f1d1d; font-size: 15px;">If this wasn't you, please contact us immediately to secure your account.</p>
</div>
{{/if}}

<!-- Security Actions -->
{{#if suspicious}}
<div style="background: rgba(153, 27, 27, 0.1); border: 2px solid #991b1b; border-radius: 12px; padding: 20px; margin: 20px 0;">
    <p style="font-size: 16px; font-weight: 700; color: #991b1b;">üö® RECOMMENDED ACTIONS</p>
    <ul style="margin-left: 20px; margin-top: 16px; line-height: 1.8; font-size: 15px; color: #7f1d1d;">
        <li>Contact us immediately if this wasn't you</li>
        <li>Change your password as a precaution</li>
        <li>Review your recent portal activity</li>
        <li>Ensure you're using secure networks</li>
    </ul>
</div>
{{else}}
<div class="info-card">
    <h4 style="color: #7c2d92; margin-bottom: 16px;">üîí Security Reminders</h4>
    <ul style="margin-left: 20px; color: #4b5563; line-height: 1.8; font-size: 15px;">
        <li>Always log out when using shared devices</li>
        <li>Use strong, unique passwords</li>
        <li>Access the portal only from secure networks</li>
        <li>Keep your login credentials confidential</li>
    </ul>
</div>
{{/if}}

<!-- Security Tips -->
{{#if securityTips}}
<div class="success-notice">
    <h4 style="color: #15803d; margin-bottom: 16px;">üí° Security Tips</h4>
    <ul style="margin-left: 20px; line-height: 1.8; font-size: 15px;">
        {{#each securityTips}}
        <li>{{this}}</li>
        {{/each}}
    </ul>
</div>
{{/if}}

<!-- Contact Information -->
<div class="success-notice">
    <h4 style="color: #15803d; margin-bottom: 16px;">üìû Need Help?</h4>
    <p style="font-size: 15px; line-height: 1.6;">
        If you have any security concerns or didn't authorize this login, please contact our support team immediately. We're here to help protect your account and data.
    </p>
</div>

<!-- Action Buttons -->
{{#if suspicious}}
<div class="cta-section">
    <a href="#" class="cta-button" style="background-color: #dc2626;">Contact Support Now</a>
</div>
{{else}}
<div class="cta-section">
    <a href="#" class="cta-button">Access Client Portal</a>
</div>
{{/if}}

<!-- Footer -->
<div class="message">
    <p style="font-size: 14px; color: #6b7280; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
        <strong>Security Notice:</strong><br>
        This automated notification helps protect your client portal access. We monitor login activity to ensure the security of your business information and communications.<br><br>
        <strong>Unrecognized login?</strong> Contact our support team immediately.
    </p>
</div>

{{/base}} 